{namespace dce=ArminVieweg\Dce\ViewHelpers}
<f:layout name="None" />

<f:section name="main">
  <f:if condition="{f:cObject(typoscriptObjectPath: 'lib.mitarbeiterNurNamen')}">
    <f:then><f:link.page pageUid="12" section="c{contentObject.uid}" class="team-mitarbeiter">{field.vorname} {field.name} (<f:switch expression="{f:cObject(typoscriptObjectPath: 'lib.pageid')}"><f:case value="14"><f:for each="{field.teilprojekte}" as="teilprojekt"><f:switch expression="{teilprojekt.tpTeilprojekt}"><f:case value="PP01"><span>{teilprojekt.tpTeilprojekt}: <f:if condition="{teilprojekt.tpFunktion}"><f:then>{teilprojekt.tpFunktion}</f:then><f:else>{field.funktionAllgemein}</f:else></f:if></span></f:case></f:switch></f:for></f:case><f:case value="15"><f:for each="{field.teilprojekte}" as="teilprojekt"><f:switch expression="{teilprojekt.tpTeilprojekt}"><f:case value="PP02"><span>{teilprojekt.tpTeilprojekt}: <f:if condition="{teilprojekt.tpFunktion}"><f:then>{teilprojekt.tpFunktion}</f:then><f:else>{field.funktionAllgemein}</f:else></f:if></span></f:case><f:case value="PP03"><span>{teilprojekt.tpTeilprojekt}: <f:if condition="{teilprojekt.tpFunktion}"><f:then>{teilprojekt.tpFunktion}</f:then><f:else>{field.funktionAllgemein}</f:else></f:if></span></f:case><f:case value="PP04"><span>{teilprojekt.tpTeilprojekt}: <f:if condition="{teilprojekt.tpFunktion}"><f:then>{teilprojekt.tpFunktion}</f:then><f:else>{field.funktionAllgemein}</f:else></f:if></span></f:case></f:switch></f:for></f:case><f:case value="16"><f:for each="{field.teilprojekte}" as="teilprojekt"><f:switch expression="{teilprojekt.tpTeilprojekt}"><f:case value="PP05"><span>{teilprojekt.tpTeilprojekt}: <f:if condition="{teilprojekt.tpFunktion}"><f:then>{teilprojekt.tpFunktion}</f:then><f:else>{field.funktionAllgemein}</f:else></f:if></span></f:case><f:case value="PP06"><span>{teilprojekt.tpTeilprojekt}: <f:if condition="{teilprojekt.tpFunktion}"><f:then>{teilprojekt.tpFunktion}</f:then><f:else>{field.funktionAllgemein}</f:else></f:if></span></f:case></f:switch></f:for></f:case><f:case value="17"><f:for each="{field.teilprojekte}" as="teilprojekt"><f:switch expression="{teilprojekt.tpTeilprojekt}"><f:case value="PP08"><span>{teilprojekt.tpTeilprojekt}: <f:if condition="{teilprojekt.tpFunktion}"><f:then>{teilprojekt.tpFunktion}</f:then><f:else>{field.funktionAllgemein}</f:else></f:if></f:case><f:case value="PP10"><span>{teilprojekt.tpTeilprojekt}: <f:if condition="{teilprojekt.tpFunktion}"><f:then>{teilprojekt.tpFunktion}</f:then><f:else>{field.funktionAllgemein}</f:else></f:if></span></f:case></f:switch></f:for></f:case><f:case value="18"><f:for each="{field.teilprojekte}" as="teilprojekt"><f:switch expression="{teilprojekt.tpTeilprojekt}"><f:case value="PP11"><span>{teilprojekt.tpTeilprojekt}: <f:if condition="{teilprojekt.tpFunktion}"><f:then>{teilprojekt.tpFunktion}</f:then><f:else>{field.funktionAllgemein}</f:else></f:if></span></f:case></f:switch></f:for></f:case></f:switch>)</f:link.page></f:then>
    <f:else>
      <article id="c{contentObject.uid}" class="mitarbeiter" data-sort-name="{field.name}, {field.vorname}" data-sort-projekte="{field.kategorie}" data-sort-sorting="{contentObject.sorting}"{f:if(condition: '{field.funktionAllgemein}', then: ' data-sort-funkAllg="{field.funktionAllgemein}"', else: '')} data-sort-projektfunk=<![CDATA[']]>{<f:for each='{field.teilprojekte}' as='teilprojekt'><f:if condition='{teilprojekt.tpFunktion}'>"{teilprojekt.tpTeilprojekt}":"{teilprojekt.tpFunktion}",</f:if></f:for>"x":0}<![CDATA[']]>>
        <div class="m-icon-view">
          <f:if condition="{field.foto}">
            <f:then>
              <f:for each="{dce:fal(field:'foto', contentObject:contentObject)}" as="fileReference" iteration="iterator"><f:if condition="{iterator.isFirst}">
                <f:render partial="Image" arguments="{src: fileReference.uid, treatIdAsReference: 1, width: '260c', height: '260c-50', class: 'img-responsive img-circle w100 border-gray', fileUid: fileReference.originalFile.properties.uid}" />
              </f:if></f:for>
            </f:then>
            <f:else>
            <f:render partial="Image" arguments="{src: 'fileadmin/user_upload/Teamfotos/dummy_neutral3.png', width: '260c', height: '260c', class: 'img-responsive img-circle w100 border-gray', copyright: 'cc0'}" />
            </f:else>
          </f:if>
          <div class="mitarbeiter-name"><b><span class="ma-titel">{f:if(condition: '{field.titel}', then: '{field.titel}', else: '&nbsp;')}</span> {field.vorname} {field.name}{f:if(condition: '{field.titelNachgestellt}', then: ', {field.titelNachgestellt} ', else: '')}</b><div class="zusaetze"><f:if condition="{field.email}"> <a href="mailto:{field.email}" title="E-Mail"><span class="glyphicon glyphicon-envelope" aria-hidden="true"></span></a></f:if><f:if condition="{field.homepage}"><f:if condition="{field.homepage}!='http://'"> <a href="{field.homepage}" target="_BLANK" title="Homepage"><span class="glyphicon glyphicon-globe" aria-hidden="true"></span></a></f:if></f:if></div></div>
        </div>
        <div class="row m-list-view">
          <div class="col-sm-3 col-md-4">
            <f:if condition="{field.foto}">
              <f:then>
                <f:for each="{dce:fal(field:'foto', contentObject:contentObject)}" as="fileReference" iteration="iterator"><f:if condition="{iterator.isFirst}">
                  <f:render partial="Image" arguments="{src: fileReference.uid, treatIdAsReference: 1, width: '260c', height: '260c-50', class: 'img-responsive img-rounded w100 mib05e border-gray', fileUid: fileReference.originalFile.properties.uid}" />
                </f:if></f:for>
              </f:then>
              <f:else>
              <f:render partial="Image" arguments="{src: 'fileadmin/user_upload/Teamfotos/dummy_neutral3.png', width: '260c', height: '260c', class: 'img-responsive img-rounded w100 mib05e border-gray', copyright: 'cc0'}" />
              </f:else>
            </f:if>
          </div>
          <div class="col-sm-9 col-md-8">
            <div class="mitarbeiter-name"><b>{f:if(condition: '{field.titel}', then: '{field.titel} ', else: '')} {field.vorname} {field.name}{f:if(condition: '{field.titelNachgestellt}', then: ', {field.titelNachgestellt} ', else: '')}</b><div class="zusaetze"><f:if condition="{field.email}"> <a href="mailto:{field.email}" title="E-Mail"><span class="glyphicon glyphicon-envelope" aria-hidden="true"></span></a></f:if><f:if condition="{field.homepage}"><f:if condition="{field.homepage}!='http://'"> <a href="{field.homepage}" target="_BLANK" title="Homepage"><span class="glyphicon glyphicon-globe" aria-hidden="true"></span></a></f:if></f:if></div></div>
            <p>
            	<f:if condition="{field.institution}"><f:if condition="{field.institutionUrl}"><f:then><f:if condition="{field.institutionUrl}!='http://'"><f:then><a href="{field.institutionUrl}" target="_BLANK" title="Institution">{field.institution}</a></f:then><f:else>{field.institution}</f:else></f:if></f:then><f:else>{field.institution}</f:else></f:if><f:if condition="{field.institut}"><f:then> - </f:then><f:else><br></f:else></f:if></f:if>
              <f:if condition="{field.institut}"><f:if condition="{field.institutUrl}"><f:then><f:if condition="{field.institutUrl}!='http://'"><f:then><a href="{field.institutUrl}" target="_BLANK" title="Institution">{field.institut}</a></f:then><f:else>{field.institut}</f:else></f:if></f:then><f:else>{field.institut}</f:else></f:if><br></f:if>
            </p>
            <f:if condition="{field.funktionAllgemein}"><p>{field.funktionAllgemein}</p></f:if>
            <p><b><f:if condition="{f:count(subject: field.teilprojekte)} > 1"><f:then>{f:translate(key: 'LLL:fileadmin/templates/locallang.xml:mitarbeiter_projekte')}</f:then><f:else>{f:translate(key: 'LLL:fileadmin/templates/locallang.xml:mitarbeiter_projekt')}</f:else></f:if>:</b><br>
            	<f:for each="{field.teilprojekte}" as="teilprojekt">
            		{teilprojekt.tpTeilprojekt}<f:if condition="{teilprojekt.tpFunktion}"> - {teilprojekt.tpFunktion}</f:if><br>
            	</f:for>
            </p>
          </div>
          <f:if condition="{field.kurzbeschreibung}">
          <div class="col-xs-12">
            <f:format.nl2br>{field.kurzbeschreibung}</f:format.nl2br><br>
          </div>
          </f:if>
        </div>
      </article>
    </f:else>
  </f:if>
</f:section>
