<INCLUDE_TYPOSCRIPT: source="FILE:fileadmin/templates/gridelements/bootstrap3_grid/setup.txt">
<INCLUDE_TYPOSCRIPT: source="FILE:fileadmin/templates/gridelements/bootstrap3_panel/setup.txt">
<INCLUDE_TYPOSCRIPT: source="FILE:fileadmin/templates/gridelements/misc/setup.txt">
page = PAGE

config {
  language = de
  doctype = html5
  xmlprologue = none
  xhtml_cleaning = all
  htmlTag_setParams = lang="de" dir="ltr" class="no-js"
  disablePrefixComment = true
//  concatenateCss = 1
//  compressCss = 1
//  concatenateJs = 1
//  compressJs = 1
}
config.spamProtectEmailAddresses = ascii
config.pageRendererTemplateFile = fileadmin/templates/tslib_page_frontend.html

#RealUrl
config {
  prefixLocalAnchors = all
  simulateStaticDocuments = 0
  baseURL = http://typo3.dioe.at/
  tx_realurl_enable = 1
}

config.headerComment (
)

page.headerData.1010 = TEXT
page.headerData.1010.value (
  <link rel="icon" href="fileadmin/favicon.ico" type="image/x-icon" />
  <link rel="apple-touch-icon" href="fileadmin/apple-touch-icon.png">
)
page.headerData.1010.insertData = 1

page.includeCSS {
  file1 = https://fonts.googleapis.com/css?family=Lato:300,300i,400,400i,700,700i&amp;subset=latin-ext
  file2 = https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css
  file3 = fileadmin/css/normalize.css
  file4 = fileadmin/css/main.css
  file5 = fileadmin/css/ekko-lightbox.min.css
  file6 = fileadmin/css/style.css
}
page.includeJS {
  file1 = fileadmin/js/vendor/modernizr-2.8.3.min.js
}


page.bodyTag >
page.bodyTagCObject = TEXT
page.bodyTagCObject.field = uid
page.bodyTagCObject.wrap = <body id="hp|">
page.typeNum = 0
page.10 = COA
page.10 {
  1 = TEXT
  1.value (
    <!--if lt IE 8
    p.browserupgrade
      | You are using an
      strong outdated
      |  browser. Please
      a(href='http://browsehappy.com/') upgrade your browser
      |  to improve your experience.
    -->
  )

  10 = COA
  10 {
    wrap =<nav data-0="top: !auto; position:absolute;" data-top="top: !0; position:fixed;" class="nav nav-pills hidden-print"><a href="/"><img class="logo" src="fileadmin/img/dioe-logo-gray.png" alt=""></a>|</nav>
    20 = COA
    20 {
      10  = HMENU
      10 {
        special = directory
        //special = categories
        special.value = 1
        entryLevel = 0
        target = _top
        excludeUidList = 50
        //includeNotInMenu = 1
        //wrap = <ul>|</ul>
        1 = TMENU
        1 {
          expAll=1
          NO = 1
          NO {
            wrapItemAndSub.cObject = TEXT
            wrapItemAndSub.cObject.value = <li id="mp{field:uid}" role="presentation">|</li>
            wrapItemAndSub.cObject.insertData = 1
            wrapItemAndSub.cObject.if.value = 1
            wrapItemAndSub.cObject.if.isInList.field = categories
            doNotShowLink.stdWrap.cObject = TEXT
            doNotShowLink.stdWrap.cObject.value = 1
            doNotShowLink.stdWrap.cObject.if.value = 1
            doNotShowLink.stdWrap.cObject.if.isInList.field = categories
            doNotShowLink.stdWrap.cObject.if.negate = 1
            ATagTitle.field = abstract
            ATagBeforeWrap = 1
            linkWrap = |
          }
          IFSUB < .NO
          IFSUB.wrapItemAndSub.cObject.value = <li id="mp{field:uid}" role="presentation" class="dropdown">|</li>
          IFSUB.ATagParams = class="dropdown-toggle" data-toggle="dropdown"
          IFSUB.linkWrap = |<span class="caret"></span>
          CUR < .NO
          CUR.wrapItemAndSub.cObject.value = <li id="mp{field:uid}" role="presentation" class="active">|</li>
          CURIFSUB < .IFSUB
          CURIFSUB.wrapItemAndSub.cObject.value = <li id="mp{field:uid}" role="presentation" class="active dropdown">|</li>
          ACT < .CUR
          ACTIFSUB < .CURIFSUB
        }
        2 < .1
        2.wrap >
        2.stdWrap.wrap = <ul class="dropdown-menu">|</ul>
        2.stdWrap.required = 1
        2.NO.wrapItemAndSub.cObject.value = <li id="mp{field:uid}">|</li>
        2.CUR.wrapItemAndSub.cObject.value = <li id="mp{field:uid}" class="active">|</li>
        2.ACT.wrapItemAndSub.cObject.value = <li id="mp{field:uid}" class="active">|</li>
        2.IFSUB >
        2.CURIFSUB >
        2.ACTIFSUB >
      }
    }
  }

  // Content
  20 = COA
  20 {
    10 = CONTENT
    10 {
      table = tt_content
      select {
        where = colPos = 0
      }
      wrap = <article class="intro-text"><br>|</article>
    }
    wrap = <div class="content container narrow">|</div>
  }

  // Footer
  30 = COA
  30 {
    10 = CONTENT
    10 {
      table = tt_content
      select {
        where = colPos = 0
        pidInList = 27
      }
    }
    wrap = <br><br><footer class="hidden-print">|</footer>
  }
}

lib.isOne = TEXT
lib.isOne.value = 1

lib.lizenz = COA
lib.lizenz {
  10 = USER
  10 {
    includeLibs = fileadmin/templates/php/funktionen.php
    userFunc = user_funktionen_class->user_lizenz
  }
}
lib.PublikationAuthoren = COA
lib.PublikationAuthoren {
  10 = USER
  10 {
    includeLibs = fileadmin/templates/php/funktionen.php
    userFunc = user_funktionen_class->user_publikation_authoren
  }
}
lib.PublikationBibTex = COA
lib.PublikationBibTex {
  10 = USER
  10 {
    includeLibs = fileadmin/templates/php/funktionen.php
    userFunc = user_funktionen_class->user_publikation_bibtex
  }
}
lib.lizenzKlein < lib.lizenz
lib.lizenzKlein.10.klein = 1
lib.lizenzNolink < lib.lizenz
lib.lizenzNolink.10.keinlink = 1
lib.lizenzNolinkKlein < lib.lizenzNolink
lib.lizenzNolinkKlein.10.klein = 1
lib.lizenzNolinkSpan < lib.lizenzNolink
lib.lizenzNolinkSpan.10.span = 1
lib.lizenzNolinkKleinSpan < lib.lizenzNolinkKlein
lib.lizenzNolinkKleinSpan.10.span = 1
lib.lizenzImg < lib.lizenz
lib.lizenzImg.10.bild = 1
lib.lizenzImgKlein < lib.lizenzImg
lib.lizenzImgKlein.10.klein = 1
lib.lizenzImgNolink < lib.lizenzImg
lib.lizenzImgNolink.10.keinlink = 1
lib.lizenzImgNolinkKlein < lib.lizenzImgNolink
lib.lizenzImgNolinkKlein.10.klein = 1

lib.dateiextension = COA
lib.dateiextension {
  10 = TEXT
  10.value = 1
  10.stdWrap.wrap = |
  10.stdWrap.if.value = gif,jpg,jpeg,tif,tiff,bmp,pcx,tga,png,pdf,ai
  10.stdWrap.if.isInList.current = 1
}

lib.namebe = COA
lib.namebe {
  10 = CONTENT
  10 {
    table = be_users
    select {
      uidInList.current = 1
      pidInList = root
    }
    renderObj = COA
    renderObj {
      10 = TEXT
      10.field = realName // username
    }
  }
}

lib.seitentitel = COA
lib.seitentitel {
  10 = TEXT
  10.data =  page:subtitle // page:title
}

lib.mitarbeiter < page.10.20.10
lib.mitarbeiter {
  select.pidInList = 12
  select.where = colPos = 1
  select.orderBy = sorting asc
  renderObj = < tt_content
  renderObj.stdWrap.noTrimWrap = ||###SPLITTER### |
  stdWrap.split {
    token = ###SPLITTER###
    cObjNum = 1 |*| 1 |*| 2||3
    1 {
      current = 1
      wrap = |,
    }
    2 {
      current = 1
      wrap = |
    }
  }
  wrap = |
}

lib.artikel = COA
lib.artikel {
  10 = CONTENT
  10 {
    table = tt_content
    select {
      pidInList = 28,30,35,31,32,33
      orderBy = date desc
      where = FIND_IN_SET('22',selected_categories)
    }
  }
  20 < .10
  20.select.where = NOT FIND_IN_SET('22',selected_categories)
  20.select.max = 10
  wrap = <div class="article-list">|<div class="article-laden"></div></div>
}


// Startseite
[globalVar = TSFE:id = 1]
page.10 {
  5 = TEXT
  5.value (
<header class="main hidden-print">
  <img class="hero mountains active" data-0="transform: translateY(40%)" data-390="transform: translateY(70%)" src="fileadmin/img/mountains.png" />
  <img class="hero city" data-0="transform: translateY(40%)" data-390="transform: translateY(70%)" src="fileadmin/img/city.png" />
  <img class="logo" src="fileadmin/img/dioe-logo-gray.png" data-0="transform:translateY(0%); opacity: 1" data-390="transform:translateY(150%); opacity:.7">
</header>
)
  10.wrap = <nav data-0="top: !auto; position:absolute;" data-top="top: !0; position:fixed;" class="nav nav-pills hidden-print"><img data-0="transform:scale(0.3); opacity:0" data-200="transform:scale(0.3); opacity:0" data-390="transform:scale(1); opacity:1;" class="logo" src="fileadmin/img/dioe-logo-gray.png" alt="">|</nav>
  20.20 < lib.artikel
  20.20.10.select.where = FIND_IN_SET('21',selected_categories)
  20.20.20.select.where = NOT FIND_IN_SET('21',selected_categories)
  20.20.20.select.max = 5
}
[global]

// Aktuelles
[globalVar = TSFE:id = 6]
lib.mitarbeiterNurNamen < lib.isOne
page.10.20.20 < lib.artikel
page.10.20.20.10.select.where >
page.10.20.20.10.select.max = 10
page.10.20.20.20 >
[global]

// Task-Cluster A
[globalVar = TSFE:id = 14]
lib.mitarbeiterNurNamen < lib.isOne
page.10.20.15 < lib.mitarbeiter
page.10.20.15.select.andWhere = FIND_IN_SET('24',selected_categories)
page.10.20.20 < lib.artikel
page.10.20.20.10.select.andWhere = FIND_IN_SET('16',selected_categories)
page.10.20.20.20.select.andWhere < page.10.20.20.10.select.andWhere
[global]

// Task-Cluster B
[globalVar = TSFE:id = 15]
lib.mitarbeiterNurNamen < lib.isOne
page.10.20.15 < lib.mitarbeiter
page.10.20.15.select.andWhere = FIND_IN_SET('26',selected_categories) OR FIND_IN_SET('27',selected_categories) OR FIND_IN_SET('28',selected_categories)
page.10.20.20 < lib.artikel
page.10.20.20.10.select.andWhere = FIND_IN_SET('17',selected_categories)
page.10.20.20.20.select.andWhere < page.10.20.20.10.select.andWhere
[global]

// Task-Cluster C
[globalVar = TSFE:id = 16]
lib.mitarbeiterNurNamen < lib.isOne
page.10.20.15 < lib.mitarbeiter
page.10.20.15.select.andWhere = FIND_IN_SET('30',selected_categories) OR FIND_IN_SET('31',selected_categories)
page.10.20.20 < lib.artikel
page.10.20.20.10.select.andWhere = FIND_IN_SET('18',selected_categories)
page.10.20.20.20.select.andWhere < page.10.20.20.10.select.andWhere
[global]

// Task-Cluster D
[globalVar = TSFE:id = 17]
lib.mitarbeiterNurNamen < lib.isOne
page.10.20.15 < lib.mitarbeiter
page.10.20.15.select.andWhere = FIND_IN_SET('33',selected_categories) OR FIND_IN_SET('34',selected_categories)
page.10.20.20 < lib.artikel
page.10.20.20.10.select.andWhere = FIND_IN_SET('19',selected_categories)
page.10.20.20.20.select.andWhere < page.10.20.20.10.select.andWhere
[global]

// Task-Cluster E
[globalVar = TSFE:id = 18]
lib.mitarbeiterNurNamen < lib.isOne
page.10.20.15 < lib.mitarbeiter
page.10.20.15.select.andWhere = FIND_IN_SET('36',selected_categories)
page.10.20.20 < lib.artikel
page.10.20.20.10.select.andWhere = FIND_IN_SET('20',selected_categories)
page.10.20.20.20.select.andWhere < page.10.20.20.10.select.andWhere
[global]

// Artikel - Details
[globalVar = TSFE:id = 39]
page.10.20 {
  20 = COA_INT
  20 {
    20 = CONTENT
    20 {
      table = tt_content
      select {
        pidInList = 28,30,35,31,32,33
        where = deleted=0 AND hidden=0
        andWhere.data = GP:artikel
        andWhere.wrap = uid=|
        andWhere.intval = 1
        max = 1
      }
    }
  }
}
[global]

// Mitarbeiter
[globalVar = TSFE:id = 12]
page.10.20 {
  20 < .10
  20.select.where = colPos = 1
  20.wrap = <div class="mitarbeiter-liste list-view clearfix">|</div>
  99 < .10
  99.select.where = colPos = 99
  99.wrap = <article class="outro-text">|</article>
}
[global]

// Publikationen
[globalVar = TSFE:id = 19]
lib.pagePublikationsListe = TEXT
lib.pagePublikationsListe.value = 1
page.10.20 {
  20 = COA
  20 {
    10 = CONTENT
    10 {
      table = tt_content
      select {
        pidInList = 35
        andWhere = bibtex_year < 10
      }
      stdWrap.required = 1
      stdWrap.wrap = <div id="p0"><h2 class="text-center">geplant</h2></div><ul class="publicationen-liste">|</ul>
    }
    20 = CONTENT
    20 {
      table = tt_content
      select {
        pidInList = 35
        orderBy = bibtex_year desc, sorting
        groupBy = bibtex_year
        andWhere = NOT bibtex_year < 10
      }
      renderObj = COA
      renderObj {
        5 = TEXT
        5.value = <div id="p{field:bibtex_year}"><h2 class="text-center">{field:bibtex_year}</h2></div>
        5.value.insertData = 1
        10 = COA
        10 {
          10 < tt_content
          20 = CONTENT
          20 {
            table = tt_content
            select {
              pidInList = 35
              where = bibtex_year={field:bibtex_year}
              where.insertData = 1
              orderBy = sorting
              andWhere = NOT bibtex_art = 6
            }
          }
          wrap = <ul class="publicationen-liste">|</ul>
        }
      }
    }
  }
}
[global]
